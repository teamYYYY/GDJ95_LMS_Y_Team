<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™ì‚¬ê´€ë¦¬ì‹œìŠ¤í…œ | Academic Management System</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- ë©”ì¸í˜ì´ì§€ ìº˜ë¦°ë” ë™ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ LIB -->
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/main.min.css' rel='stylesheet' />
	<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
	<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/locales-all.global.min.js'></script>
    
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #F5F7FA;
        }
        .hero-bg {
            background-image: linear-gradient(to right, rgba(37, 99, 235, 0.9), rgba(30, 64, 175, 0.8)), url('https://images.unsplash.com/photo-1562774053-701939374585?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
    </style>
    
    <!-- ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ì¶”ê°€ -->
	<style>
        /* Pretendard í°íŠ¸ ì„¤ì • (Tailwind ê¸°ë³¸ í°íŠ¸ ì¬ì •ì˜) */
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f7f7f9;
        }

        /* ----------------------------------------------------- */
        /* ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ (ì‚¬ìš©ì ìš”ì²­ ë°˜ì˜) */
        /* ----------------------------------------------------- */
        
        /* 1. í°íŠ¸ ë° ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì¡°ì • */
        /* ë‘¥ê¸€ê³  ì¹œí™”ì ì¸ í°íŠ¸ ì ìš© */
        #academicCalendar, .fc-header-toolbar, #calendarTitle {
            font-family: Pretendard, 'Apple SD Gothic Neo', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', Dotum, 'ë‹ì›€', sans-serif !important;
        }
        
        /* ìº˜ë¦°ë” ì»¨í…Œì´ë„ˆ ìµœì†Œ ë†’ì´ ë³´ì¥ (ë‹¬ë ¥ì´ ì•ˆ ë³´ì´ëŠ” ë¬¸ì œ í•´ê²°) */
        #academicCalendar {
            min-height: 350px; 
            width: 100%;
        }

        /* ìº˜ë¦°ë” ë‚ ì§œ ì…€ì˜ ë†’ì´ ì¡°ì • (ì´ë²¤íŠ¸ê°€ ì˜ ë³´ì´ë„ë¡) */
        #academicCalendar .fc-daygrid-day {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            height: 100px; /* ê³ ì • ë†’ì´ */
            vertical-align: top; /* ë‚´ìš©ì„ ìœ„ìª½ìœ¼ë¡œ ì •ë ¬ */
        }
        
        /* 2. ê·¸ë¦¬ë“œ í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ë§ */
        
        /* ìº˜ë¦°ë” ì „ì²´ Border ì œê±° (íˆ¬ë°•í•œ ë°”ê¹¥ìª½ í…Œë‘ë¦¬ ì œê±°) */
        #academicCalendar .fc-daygrid-container,
        #academicCalendar .fc-scrollgrid {
            border: none !important;
        }
        
        /* ìš”ì¼ í—¤ë”ê°€ ìˆ¨ê²¨ì ¸ ìˆìœ¼ë¯€ë¡œ, ê·¸ë¦¬ë“œ ìƒë‹¨ì˜ ë¶ˆí•„ìš”í•œ í…Œë‘ë¦¬ ì œê±° */
        #academicCalendar .fc-daygrid-day-top {
            border-top: none !important;
        }
        
        /* ë‚ ì§œ ì…€ì˜ ì˜¤ë¥¸ìª½/ì•„ë˜ìª½ í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ì„ ì–‡ê³  ì—°í•œ ìƒ‰ìœ¼ë¡œ í†µì¼ */
        #academicCalendar .fc-daygrid-day {
            border-right: 1px solid #E5E7EB; /* border-gray-200 */
            border-bottom: 1px solid #E5E7EB; /* border-gray-200 */
        }
        
        /* ë§¨ ì™¼ìª½ ë‚ ì§œ ì…€ì˜ ì™¼ìª½ í…Œë‘ë¦¬ ì¶”ê°€ (í…Œì´ë¸” ì „ì²´ í‹€ ìœ ì§€) */
        #academicCalendar .fc-daygrid-body table {
            border-left: 1px solid #E5E7EB;
        }
        
        /* ë§ˆì§€ë§‰ í–‰ì˜ ì•„ë˜ìª½ í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ ì œê±° (ê¹”ë”í•˜ê²Œ ë§ˆë¬´ë¦¬) */
        #academicCalendar .fc-daygrid-body tr:last-child .fc-daygrid-day {
            border-bottom: none !important;
        }
        
        /* 3. ë‚ ì§œ ë° ì£¼ë§ ìƒ‰ìƒ ì¡°ì • (ê³µíœ´ì¼ ìŠ¤íƒ€ì¼ ì¶”ê°€) */
        .fc-daygrid-day-number {
            font-weight: 500;
            font-size: 0.9rem;
            color: #4B5563; 
        }
        
        /* ğŸš© ì¼ìš”ì¼ ë‚ ì§œ (ìˆ«ì) ìƒ‰ìƒ: ë¹¨ê°• */
        .fc-day-sun .fc-daygrid-day-number {
            color: #EF4444 !important; /* red-500 */
        }
        /* ğŸŸ¦ í† ìš”ì¼ ë‚ ì§œ (ìˆ«ì) ìƒ‰ìƒ: íŒŒë‘ */
        .fc-day-sat .fc-daygrid-day-number {
            color: #3B82F6 !important; /* blue-600 */
        }

        /* ğŸ”´ ê³µíœ´ì¼ ë‚ ì§œ í…ìŠ¤íŠ¸ë¥¼ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì§€ì • */
        .holiday-date .fc-daygrid-day-number {
            color: #EF4444 !important; /* red-500 */
            font-weight: 700 !important; /* ê³µíœ´ì¼ì€ ë”ìš± ê°•ì¡° */
        }
        
        /* ì˜¤ëŠ˜ ë‚ ì§œ ê°•ì¡° ìŠ¤íƒ€ì¼ */
        #academicCalendar .fc-day-today {
            background-color: #EFF6FF !important; /* blue-50 */
            border: 1px solid #60A5FA !important; /* blue-400 */
            border-radius: 0.5rem;
        }
        
        /* 4. ê³µíœ´ì¼ ë° í•™ì‚¬ ì¼ì • ì´ë²¤íŠ¸ ìŠ¤íƒ€ì¼ */
        #academicCalendar .fc-event {
            border-radius: 0.25rem;
            font-size: 0.7rem;
            padding: 0 0.2rem;
            line-height: 1.25;
            white-space: normal;
            font-weight: 600;
            cursor: pointer; 
            border: none !important; /* ì´ë²¤íŠ¸ ìì²´ í…Œë‘ë¦¬ ì œê±° */
        }
        
        /* ğŸ”´ ê³µíœ´ì¼ ì´ë²¤íŠ¸ ìŠ¤íƒ€ì¼ (ë¹¨ê°„ìƒ‰ ë°°ê²½/ê¸€ì) */
        .holiday-event {
            border: none !important;
        }
        
        /* 5. ê¸°íƒ€ ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
        #academicCalendar .fc-daygrid-body {
            padding-top: 5px; 
        }
        #academicCalendar .fc-daygrid-body table {
            height: auto !important;
        }
        
        /* ë‚ ì§œ ì…€ì— ì»¤ì„œ í¬ì¸í„° ì ìš© (í´ë¦­ ê°€ëŠ¥ ì‹œê°ì  í‘œì‹œ) */
        #academicCalendar .fc-daygrid-day-frame {
            cursor: pointer;
        }
        
        /* ğŸ”´ ì„ íƒëœ ë‚ ì§œ ìŠ¤íƒ€ì¼ */
        #academicCalendar .selected-day {
            /* ê¸°ì¡´ ì˜¤ëŠ˜ ë‚ ì§œì™€ êµ¬ë¶„ë˜ë„ë¡ ë‹¤ë¥¸ ìƒ‰ìƒ ì‚¬ìš© */
            background-color: #E0F2FE !important; /* light-blue-100 */
            border: 1px solid #0EA5E9 !important; /* sky-500 */
            border-radius: 0.5rem;
        }

        /* ìº˜ë¦°ë” ë‚ ì§œ ìˆ«ì ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ë§ (dayCellContentì™€ ì—°ë™) */
        .fc-daygrid-day-number > span {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 1.75rem; /* w-7 */
            height: 1.75rem; /* h-7 */
            margin: 0 auto; /* mx-auto */
            border-radius: 9999px;
            margin-bottom: 4px; /* ë‚ ì§œ ìˆ«ì ì•„ë˜ì— ì—¬ë°± ì¶”ê°€ */
        }
        
        /* ì„ íƒëœ ë‚ ì§œì˜ ë‚ ì§œ ìˆ«ì ìì²´ì— ì„ íƒ í‘œì‹œ */
        #academicCalendar .selected-day .fc-daygrid-day-number > span {
            background-color: #bfdbfe; /* blue-200 */
            color: #1d4ed8; /* blue-700 */
            font-weight: 700;
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í„°ë§ˆì´ì§• */
        .custom-scroll::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #cbd5e1; /* gray-300 */
            border-radius: 9999px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background-color: #f8f8f8;
        }
    </style>
    
</head>
<body class="text-gray-800">

    <header>
        <div class="bg-white py-4 px-6 border-b border-gray-200">
            <div class="max-w-7xl mx-auto flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white">
                    <i class="fa-solid fa-graduation-cap text-xl"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold text-gray-800">í•™ì‚¬ê´€ë¦¬ì‹œìŠ¤í…œ</h1>
                    <p class="text-xs text-gray-500">Academic Management System</p>
                </div>
            </div>
        </div>

        <div class="hero-bg h-32 w-full"></div>

		<!-- í—¤ë” ë„¤ë¹„ê²Œì´ì…˜ ë¶€ë¶„ -->

        <div class="bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4">
                <nav class="flex space-x-8 overflow-x-auto scrollbar-hide">
                
                	{{#useAdmin}}
                	<!-- ê´€ë¦¬ì ê¸°ëŠ¥ ì‚¬ìš©í•  í—¤ë” ë©”ë‰´ -->
			        {{/useAdmin}}
			        
			        {{#useStudent}}
			        <!-- í•™ìƒ ê¸°ëŠ¥ ì‚¬ìš©í•  í—¤ë” ë©”ë‰´ -->
			        {{/useStudent}}
			        
			        {{#useProfessor}}
			        <!-- êµìˆ˜ ê¸°ëŠ¥ ì‚¬ìš©í•  í—¤ë” ë©”ë‰´ -->
			        {{/useProfessor}}
                    <a href="/courseListForEnrollment" class="flex items-center gap-2 py-4 text-gray-600 hover:text-blue-600 font-medium border-b-2 border-transparent hover:border-blue-600 transition">
                        <i class="fa-solid fa-book-open"></i> ìˆ˜ê°•ì‹ ì²­
                    </a>
                    <a href="#" class="flex items-center gap-2 py-4 text-gray-600 hover:text-blue-600 font-medium border-b-2 border-transparent hover:border-blue-600 transition">
                        <i class="fa-solid fa-chart-bar"></i> ì„±ì ì¡°íšŒ
                    </a>
                    <a href="#" class="flex items-center gap-2 py-4 text-gray-600 hover:text-blue-600 font-medium border-b-2 border-transparent hover:border-blue-600 transition">
                        <i class="fa-regular fa-calendar-check"></i> í•™ì‚¬ì¼ì •
                    </a>
                    <a id="certificateLink"
			           href="/main/certificateOfGraduation"
			           class="flex items-center gap-2 py-4 text-gray-600 hover:text-blue-600 font-medium border-b-2 border-transparent hover:border-blue-600 transition cursor-pointer">
			            <i class="fa-solid fa-file-lines"></i> ì¡¸ì—…ì¦ëª…ì„œ ë°œê¸‰ (íŒì—…)
			        </a>
                    <a href="#" class="flex items-center gap-2 py-4 text-gray-600 hover:text-blue-600 font-medium border-b-2 border-transparent hover:border-blue-600 transition">
                        <i class="fa-solid fa-gear"></i> ì„¤ì •
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8 space-y-6">
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- ìº˜ë¦°ë” ë¶€ë¶„ -->
            
            <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100">
                <div class="mb-4">
                    <h3 class="text-lg font-bold text-gray-800">í•™ì‚¬ ì¼ì •</h3>
                    <p class="text-sm text-gray-500">ì´ë²ˆ ë‹¬ ì£¼ìš” ì¼ì •ì„ í™•ì¸í•˜ì„¸ìš”</p>
                </div>
                
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-4">
                        <button id="prevMonthBtn" class="px-3 py-1.5 text-sm text-gray-400 hover:text-gray-600"><i class="fa-solid fa-chevron-left"></i></button>
                        
                        <span id="calendarTitle" class="font-semibold text-gray-700">ë¡œë”© ì¤‘...</span>
                        
                        <button id="nextMonthBtn" class="px-3 py-1.5 text-sm text-gray-400 hover:text-gray-600"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                    
                    <!-- FullCalendarì˜ ìš”ì¼ í—¤ë”ë¥¼ ìˆ¨ê²¼ìœ¼ë¯€ë¡œ, ìˆ˜ë™ìœ¼ë¡œ ìš”ì¼ í‘œì‹œ -->
                    <div class="grid grid-cols-7 gap-2 text-center text-xs text-gray-400 border-b pb-2">
                        <span class="text-red-500">ì¼</span><span>ì›”</span><span>í™”</span><span>ìˆ˜</span><span>ëª©</span><span>ê¸ˆ</span><span class="text-blue-600">í† </span>
                    </div>
                </div>
                
                <div id="academicCalendar"></div>
            </div>

			<!-- ì‹œê°„í‘œ ë¶€ë¶„ -->

            <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100">
                
                <div class="mb-4">
                    <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                        <i class="fa-regular fa-clock text-blue-500"></i> ì˜¤ëŠ˜ì˜ ì‹œê°„í‘œ
                    </h3>
                    <p class="text-sm text-gray-500 today-date-display">
                        ë¡œë”© ì¤‘...
                    </p> 
                </div>
            
                <div class="schedule-content space-y-3 max-h-[400px] overflow-y-auto custom-scroll pr-1">
                    <!-- ì‹œê°„í‘œ ë¡œë”© ë©”ì‹œì§€ ë˜ëŠ” ì‹¤ì œ ë‚´ìš©ì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤. -->
                    <div class="p-4 text-center text-gray-500 border border-dashed rounded-lg">
                        <i class="fa-solid fa-spinner fa-spin mr-2"></i> ì‹œê°„í‘œ ë¡œë”© ì¤‘...
                    </div>
                </div>
            </div>

			<!-- ì‚¬ìš©ì í”„ë¡œíŒŒì¼ ì¹´ë“œ ì„¸ì…˜ -->
			
			<div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 h-fit">
			    <div class="mb-6">
			        <h2 class="text-lg font-bold text-gray-800">í™˜ì˜í•©ë‹ˆë‹¤!</h2>
			        <p class="text-gray-600 mt-1">{{userProfileCard.deptName}}</p> </div>
			
			    <div class="bg-blue-50 rounded-lg p-4 mb-6">
			        <span class="text-xs text-gray-500 block mb-1">í•™ë²ˆ/ë²ˆí˜¸</span>
			        <span class="text-blue-700 font-semibold">{{userProfileCard.userId}}</span> 
			    </div>
			    
			    <div class="bg-blue-50 rounded-lg p-4 mb-6">
			        <span class="text-xs text-gray-500 block mb-1">ì‚¬ìš©ì ì´ë¦„</span>
			        <span class="text-blue-700 font-semibold">{{userProfileCard.userName}}ë‹˜</span> </div>
			
			    <div class="space-y-3">
			        <a href="/myInfo/userInfo" class="w-full py-2.5 px-4 border border-gray-300 rounded-lg text-gray-600 text-sm hover:bg-gray-50 flex items-center gap-3 transition">
			            <i class="fa-regular fa-user w-5"></i> ë‚´ ì •ë³´
			        </a>
			        
			        {{#useAdmin}}
			        <a href="/admin/courseManagement" class="w-full py-2.5 px-4 border border-gray-300 rounded-lg text-gray-600 text-sm hover:bg-gray-50 flex items-center gap-3 transition">
			            <i class="fa-solid fa-book w-5"></i> í•™ì  ê´€ë¦¬
			        </a>
			        {{/useAdmin}}
			        
			        {{#useStudent}}
			        <a href="/myInfo/courseManagement" class="w-full py-2.5 px-4 border border-gray-300 rounded-lg text-gray-600 text-sm hover:bg-gray-50 flex items-center gap-3 transition">
			            <i class="fa-solid fa-book w-5"></i> í•™ì  ê´€ë¦¬
			        </a>
			        {{/useStudent}}
			        
			        {{#useProfessor}}
			        <a href="#" class="w-full py-2.5 px-4 border border-gray-300 rounded-lg text-gray-600 text-sm hover:bg-gray-50 flex items-center gap-3 transition">
			            <i class="fa-solid fa-book w-5"></i> ì„±ì  ì…ë ¥/ì¡°íšŒ
			        </a>
			        {{/useProfessor}}
			
			        <a href="/logout" class="w-full py-2.5 px-4 border border-red-200 rounded-lg text-red-500 text-sm hover:bg-red-50 flex items-center gap-3 transition">
			            <i class="fa-solid fa-arrow-right-from-bracket w-5"></i> ë¡œê·¸ì•„ì›ƒ
			        </a>
			    </div>
			</div>
            
        </div>
        
        <!-- í•™êµ ê³µì§€ì‚¬í•­ -->

        <div class="bg-blue-50 rounded-xl border border-blue-100 p-6">
        
        	<div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 p-2 rounded-lg text-white shadow-md">
                        <i class="fa-regular fa-bell"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-bold text-gray-800">í•™êµ ê³µì§€ì‚¬í•­</h2>
                        <p class="text-sm text-gray-500">ìµœì‹  ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”</p>
                    </div>
                </div>
                <a href="#" class="text-sm text-gray-500 bg-white px-3 py-1.5 rounded border hover:bg-gray-50 shadow-sm">ì „ì²´ë³´ê¸°</a>
            </div>
        
        	<!-- ê³µì§€ì‚¬í•­ ê²Œì‹œê¸€ ë¶€ë¶„ -->
        
		    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
			    {{#mainUniversityNoticeList}}
			    
			    <a href="javascript:void(0)" 
			       class="bg-white p-5 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition block"
			       data-notice-no="{{universityNoticeNo}}"> 
			        
			        <div class="flex justify-between items-start mb-2">
			            <div class="flex gap-2">
			                
			                {{#universityNoticePriorityCode}}
			                    {{#is_10}}
			                    <span class="bg-red-100 text-red-700 text-[10px] px-2 py-0.5 rounded font-bold" data-priority-code="{{universityNoticePriorityCode}}">
			                        ê³ ì • ê³µì§€ì‚¬í•­
			                    </span>
			                    {{/is_10}}
			
			                    {{#is_20}}
			                    <span class="bg-yellow-100 text-orange-700 text-[10px] px-2 py-0.5 rounded font-bold" data-priority-code="{{universityNoticePriorityCode}}">
			                        ìš°ì„  ê³µì§€ì‚¬í•­
			                    </span>
			                    {{/is_20}}
			                    
			                    {{#is_30}}
			                    <span class="bg-gray-100 text-gray-800 text-[10px] px-2 py-0.5 rounded font-bold" data-priority-code="{{universityNoticePriorityCode}}">
			                        ì¼ë°˜ ê³µì§€ì‚¬í•­
			                    </span>
			                    {{/is_30}}
			                    
			                    {{^is_10}} {{^is_20}} {{^is_30}}
			                    <span class="bg-gray-100 text-gray-800 text-[10px] px-2 py-0.5 rounded font-bold">
			                        ê¸°íƒ€
			                    </span>
			                    {{/is_30}} {{/is_20}} {{/is_10}}
			                    
			                {{/universityNoticePriorityCode}}
			                
			            </div>
			            <!-- ì´ê±¸ë¡œ ë³€ê²½ -->
						<span class="text-xs text-gray-400 notice-date" data-raw-date="{{universityNoticeUpdatedate}}">
						    {{universityNoticeUpdatedate}}
						</span>
			        </div>
			        
			        <h3 class="text-gray-800 font-medium mb-4">{{universityNoticeTitle}}</h3>
			        
			        <div class="flex justify-between items-center text-xs text-gray-500 border-t pt-3">
			            
			            <!-- <span class="flex items-center gap-1" onclick="openNoticeDetailModal({{universityNoticeNo}}); event.stopPropagation();"> -->
			            <span class="flex items-center gap-1" onclick="openNoticeDetailModal({{universityNoticeNo}});">
			                <i class="fa-regular fa-file-lines"></i> ìì„¸íˆ ë³´ê¸°
			            </span>
			            
			            <span>ì¡°íšŒìˆ˜ {{universityNoticeViewCnt}}</span>
			        </div>
			        
			    </a> {{/mainUniversityNoticeList}}
			    
			    {{^mainUniversityNoticeList}}
			    <div class="col-span-full p-6 text-center text-gray-500 border border-dashed rounded-lg bg-white">
			        ë“±ë¡ëœ ìµœì‹  ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.
			    </div>
			    {{/mainUniversityNoticeList}}
			</div>
		
		</div>

    </main>

    <footer class="max-w-7xl mx-auto px-4 py-8 text-center text-xs text-gray-400">
        <p>&copy; 2025 SEMI- Y í•™ì‚¬ê´€ë¦¬ì‹œìŠ¤í…œ. All rights reserved.</p>
        <p class="mt-1">ë³¸ ì‹œìŠ¤í…œì€ í•™ì‚¬ ì—…ë¬´ì˜ íš¨ìœ¨ì  ê´€ë¦¬ë¥¼ ìœ„í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
    </footer>
    
    <!-- ê³µì§€ì‚¬í•­ ê²Œì‹œíŒ ëª¨ë‹¬ ë ˆì´ì–´ ë¶€ë¶„ -->
    
    <div id="noticeModalBackdrop" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-[90] hidden transition-opacity">
    	
    	<!-- ì „ì²´ë³´ê¸° ì‹œ ë‚˜ì˜¤ëŠ” ëª¨ë‹¬ -->
    	<div id="noticeListModal" class="fixed inset-0 z-[100] hidden overflow-y-auto">
		    <div class="flex items-center justify-center min-h-screen p-4">
		        <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 max-w-screen-xl w-full">
		            <div class="flex justify-between items-center mb-6 border-b pb-4">
		                <h2 class="text-2xl font-bold text-gray-800">í•™êµ ê³µì§€ì‚¬í•­ ì „ì²´</h2>
		                <button onclick="closeNoticeListModal()" class="text-gray-500 hover:text-gray-800 text-xl">
		                    <i class="fa-solid fa-xmark"></i>
		                </button>
		            </div>
		
		            <div class="flex justify-between items-center mb-6">
		                <div class="text-sm text-gray-600">ì´ <span id="listTotalCount" class="font-semibold text-blue-600">0</span>ê±´</div>
		                <div class="flex gap-2">
		                    <input type="text" id="searchInput" placeholder="ì œëª© ë˜ëŠ” ë‚´ìš© ê²€ìƒ‰" class="border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-blue-500 focus:border-blue-500 w-64">
		                    <button onclick="searchNotice(1)" class="px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
		                        <i class="fa-solid fa-magnifying-glass"></i> ê²€ìƒ‰
		                    </button>
		                </div>
		            </div>
		            
		            <div class="overflow-x-auto border rounded-xl">
		                <table class="min-w-full divide-y divide-gray-200">
		                    <thead class="bg-gray-50">
		                        <tr>
		                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase w-16">ë²ˆí˜¸</th>
		                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase w-24">ìš°ì„ ìˆœìœ„</th>
		                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ì œëª©</th>
		                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase w-24">ì‘ì„±ì</th>
		                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase w-24">ì¡°íšŒìˆ˜</th>
		                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase w-24">ì‘ì„±ì¼</th>
		                        </tr>
		                    </thead>
		                    <tbody id="noticeListTableBody" class="bg-white divide-y divide-gray-200">
		                        <tr><td colspan="6" class="p-6 text-center text-gray-500">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
		                    </tbody>
		                </table>
		            </div>
		            
		            <div id="paginationContainer" class="mt-6 flex justify-center space-x-2">
		                </div>
		        </div>
		    </div>
		</div>
		
		<!-- ìƒì„¸ë³´ê¸°ì‹œ ë‚˜ì˜¤ëŠ” ëª¨ë‹¬ -->
		<div id="noticeDetailModal" class="fixed inset-0 z-[110] hidden overflow-y-auto">
		    <div class="flex items-center justify-center min-h-screen p-4">
		        <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 max-w-screen-xl w-full">
		            <div class="flex justify-between items-center mb-6 border-b pb-4">
		                <h2 class="text-2xl font-bold text-gray-800">ê³µì§€ì‚¬í•­ ìƒì„¸ ì •ë³´</h2>
		                <button onclick="closeNoticeDetailModal()" class="text-gray-500 hover:text-gray-800 text-xl">
		                    <i class="fa-solid fa-xmark"></i>
		                </button>
		            </div>
		
		            <div class="space-y-4">
		                <h3 id="detailTitle" class="text-xl font-bold text-gray-900 border-b pb-3">ì œëª©</h3>
		                <div class="flex justify-between text-sm text-gray-500 border-b pb-3">
		                    <span id="detailWriter" class="flex items-center gap-2"><i class="fa-solid fa-user"></i> ì‘ì„±ì: </span>
		                    <span id="detailDate" class="flex items-center gap-2"><i class="fa-regular fa-clock"></i> ì‘ì„±ì¼: </span>
		                    <span id="detailViewCount" class="flex items-center gap-2"><i class="fa-solid fa-eye"></i> ì¡°íšŒìˆ˜: </span>
		                    <span id="detailPriority" class="flex items-center gap-2 font-semibold"></span>
		                </div>
		                <div id="detailContent" class="text-base text-gray-800 min-h-[200px] whitespace-pre-wrap">
		                    </div>
		            </div>
		
		            <div class="mt-6 text-right">
		                <button onclick="closeNoticeDetailModal()" class="px-3 py-1.5 text-sm bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition">ë‹«ê¸°</button>
		            </div>
		        </div>
		    </div>
		</div>
		
    </div>
    
    <!-- ê³µì§€ì‚¬í•­ ìš°ì„ ìˆœìœ„ íƒœê·¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
		/**
		 * main.mustacheì— í¬í•¨ë˜ì–´ì•¼ í•˜ëŠ” JavaScript ì½”ë“œ
		 * ê³µì§€ì‚¬í•­ ìš°ì„ ìˆœìœ„ ì½”ë“œì— ë”°ë¼ íƒœê·¸ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•˜ëŠ” í•¨ìˆ˜
		 */
		function getPriorityClass(priorityCode) {
		    // Controllerì—ì„œ ì „ë‹¬ëœ MainDTOì˜ universityNoticePriorityCodeë¥¼ ì‚¬ìš©
		    if (priorityCode === '10') {
		        // ê³ ì •ê³µì§€ì‚¬í•­ (10): 'bg-red-100 text-red-700'
		        return 'bg-red-100 text-red-700';
		    } else if (priorityCode === '20') {
		        // ìš°ì„ ê³µì§€ì‚¬í•­ (20): 'bg-yellow-100 text-orange-700'
		        return 'bg-yellow-100 text-orange-700';
		    } else if (priorityCode === '30') {
		        // ì¼ë°˜ê³µì§€ì‚¬í•­ (30): 'bg-gray-100 text-gray-800'
		        return 'bg-gray-100 text-gray-800';
		    }
		    return 'bg-gray-200 text-gray-600'; // ê¸°ë³¸ê°’
		}
	</script>
	
	
	<!-- ê³µì§€ì‚¬í•­ ë‚ ì§œ í¬ë§·íŒ… -->
	<script>
	//ë‚ ì§œ í¬ë§·íŒ… í—¬í¼ í•¨ìˆ˜ (T ì œê±° + ì›í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ ë³€í™˜)
	function formatDate(isoString) {
	    if (!isoString) return '-';
	
	    // "2025-12-02T11:48:15" ë˜ëŠ” "2025-12-02T11:48:15.123Z" í˜•íƒœ ëª¨ë‘ ì²˜ë¦¬
	    const safeString = isoString.replace(' ', 'T');
    	const date = new Date(safeString);
	
    	if (isNaN(date.getTime())) return isoString.replace('T', ' ');
    	
	    // 1. í•˜ì´í”ˆ + ë„ì–´ì“°ê¸° (ê°€ì¥ ì¼ë°˜ì )
	    return date.toLocaleString('ko-KR', {
	        year: 'numeric',
	        month: '2-digit',
	        day: '2-digit',
	        hour: '2-digit',
	        minute: '2-digit',
	        second: '2-digit',
	        hour12: false
	    }).replace(/\.\s/g, '-').replace(/ì˜¤[ì „í›„]\s/, ' '); // í•„ìš”ì‹œ ì˜¤ì „/ì˜¤í›„ ì œê±°
	}
	</script>
	
	
    
	
	<!-- ìº˜ë¦°ë” íƒœê·¸ ìŠ¤íƒ€ì¼ ìŠ¤í¬ë¦½íŠ¸ -->
	<script>
    // ğŸ”´ [í—¬í¼ í•¨ìˆ˜]: Date ê°ì²´ë¥¼ ë¡œì»¬ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ 'YYYY-MM-DD' ë¬¸ìì—´ë¡œ ë³€í™˜
    function toDateStringLocal(date) {
        const y = date.getFullYear();
        const m = String(date.getMonth() + 1).padStart(2, '0');
        const d = String(date.getDate()).padStart(2, '0');
        return `${y}-${m}-${d}`;
    }
    
    // ğŸ”´ [í—¬í¼ í•¨ìˆ˜]: ë‚ ì§œ í¬ë§·íŒ… í•¨ìˆ˜ (ìš”ì¼ í¬í•¨)
    function getFormattedDateWithWeekday(date) {
        var options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'short' };
        // 'YYYYë…„ Mì›” Dì¼ (ìš”ì¼)' í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        return date.toLocaleDateString('ko-KR', options).replace(/\s*\(.\)/, function(match) {
            return ' (' + match.trim().slice(-2, -1) + ')';
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('academicCalendar');
        var todayDateDisplay = document.querySelector('.today-date-display');
        var scheduleContentArea = document.querySelector('.schedule-content'); // í´ë˜ìŠ¤ë¡œ ë³€ê²½
        var calendarTitle = document.getElementById('calendarTitle');
        var prevMonthBtn = document.getElementById('prevMonthBtn');
        var nextMonthBtn = document.getElementById('nextMonthBtn');
        
        let currentSelectedDayEl = null;


        // ì›” ì œëª©ì„ 'YYYYë…„ Mì›”' í˜•íƒœë¡œ í¬ë§·íŒ…í•˜ëŠ” í•¨ìˆ˜ (í•œê¸€)
        function formatMonthTitle(date) {
             const year = date.getFullYear();
             const month = date.getMonth() + 1;
             return `${year}ë…„ ${month}ì›”`;
        }
        
        // ìº˜ë¦°ë” ì´ë²¤íŠ¸ í´ë¦­ ì‹œ í˜¸ì¶œë  í•¨ìˆ˜
        function showEventDetails(info) {
             // alert ì‚¬ìš© ëŒ€ì‹  ì„ì‹œ ëª¨ë‹¬ ë©”ì‹œì§€ë¡œ ëŒ€ì²´
             const eventMessage = `[${info.event.title}] \nê¸°ê°„: ${info.event.startStr} ~ ${info.event.endStr || info.event.startStr}\n ìƒì„¸ ì •ë³´ë¥¼ ë³´ë ¤ë©´ API í˜¸ì¶œì´ í•„ìš”í•©ë‹ˆë‹¤.`;
             console.log(eventMessage);
             // ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì»¤ìŠ¤í…€ ëª¨ë‹¬ UIë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
        }
        
        // ğŸ”´ [í•µì‹¬]: ì‹œê°„í‘œ ë°ì´í„°ë¥¼ ì„œë²„ì—ì„œ ê°€ì ¸ì™€ DOMì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
        function fetchSchedule(dateStr, dayEl) {
            
            // 1. ì„ íƒëœ ë‚ ì§œ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            if (currentSelectedDayEl) {
                currentSelectedDayEl.classList.remove('selected-day');
            }
            if (dayEl) {
                dayEl.classList.add('selected-day');
                currentSelectedDayEl = dayEl;
            }

            // 2. 'ì˜¤ëŠ˜ì˜ ì‹œê°„í‘œ' ì˜ì—­ ë‚ ì§œ ì—…ë°ì´íŠ¸
            const selectedDate = new Date(dateStr);
            todayDateDisplay.textContent = getFormattedDateWithWeekday(selectedDate);
            
            // 3. AJAX ìš”ì²­ ë° DOM ì—…ë°ì´íŠ¸ (ë¡œë”© ìƒíƒœ í‘œì‹œ)
            scheduleContentArea.innerHTML = `
                <div class="p-4 text-center text-gray-500 border border-dashed rounded-lg">
                    <i class="fa-solid fa-spinner fa-spin mr-2"></i> ì‹œê°„í‘œ ë¡œë”© ì¤‘...
                </div>`; 

            const ajaxUrl = `/api/schedule?date=${dateStr}`; 
            let attempt = 0;
            const maxAttempts = 3;

            // ì§€ìˆ˜ ë°±ì˜¤í”„ë¥¼ ì‚¬ìš©í•œ ì¬ì‹œë„ ë¡œì§
            const fetchData = async () => {
                while (attempt < maxAttempts) {
                    try {
                        const response = await fetch(ajaxUrl);

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const text = await response.text();
                        try {
                            return JSON.parse(text);
                        } catch (e) {
                            throw new Error('Invalid JSON response from server');
                        }

                    } catch (error) {
                        attempt++;
                        if (attempt >= maxAttempts) {
                            throw error;
                        }
                        const delay = Math.pow(2, attempt) * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        // console.log(`Retry attempt ${attempt} after ${delay / 1000}s...`); // ë¡œê·¸ ì œê±°
                    }
                }
            };
            
            fetchData()
                .then(data => {
                    // 4. ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ì‹œê°„í‘œ ì˜ì—­ HTML ìƒì„± ë° ì‚½ì…
                    let scheduleHtml = '';
                    
                    if (data.hasSchedule && data.mainCourseTimeTable && data.mainCourseTimeTable.length > 0) {
                        data.mainCourseTimeTable.forEach(course => {
                            // ì‹¤ì œ DTO í•„ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ HTML êµ¬ì„±
                            const courseName = course.courseName || 'ê°•ì˜ëª… ì—†ìŒ';
                            const professorUserName = course.professorUserName || 'ë¯¸ì •';
                            const courseTimeStart = course.courseTimeStart || '';
                            const courseTimeEnd = course.courseTimeEnd || '';
                            const courseClassroom = course.courseClassroom || 'ì¥ì†Œ ë¯¸ì •';
                            
                            scheduleHtml += `
                                <div class="border border-gray-100 rounded-lg p-4 hover:bg-blue-50 transition group">
                                    <div class="flex justify-between items-start mb-1">
                                        <h3 class="font-bold text-gray-800 group-hover:text-blue-600">${courseName}</h3>
                                        <span class="bg-blue-100 text-blue-600 text-xs px-2 py-1 rounded font-medium">${professorUserName}</span>
                                    </div>
                                    <div class="text-sm text-gray-500 flex flex-col gap-1">
                                        <div class="flex items-center gap-2">
                                            <i class="fa-regular fa-clock text-xs"></i> ${courseTimeStart} ${courseTimeStart && courseTimeEnd ? '-' : ''} ${courseTimeEnd}
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <i class="fa-solid fa-location-dot text-xs"></i> ${courseClassroom}
                                        </div>
                                    </div>
                                </div>`;
                        });
                    } else if (data.errorMessage) {
                         scheduleHtml = `
                            <div class="p-4 text-center text-red-500 border border-dashed rounded-lg">
                                <i class="fa-solid fa-exclamation-triangle mr-2"></i> ${data.errorMessage}
                            </div>`;
                    } else {
                        scheduleHtml = `
                            <div class="p-4 text-center text-gray-500 border border-dashed rounded-lg">
                                ê¸ˆì¼ ì¼ì •ì€ ì—†ìŠµë‹ˆë‹¤. ì—¬ìœ ë¡œìš´ í•˜ë£¨ë¥¼ ë³´ë‚´ì„¸ìš”!
                            </div>`;
                    }
                    scheduleContentArea.innerHTML = scheduleHtml;
                })
                .catch(error => {
                    console.error('ì‹œê°„í‘œë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                    scheduleContentArea.innerHTML = `
                        <div class="p-4 text-center text-red-500 border border-dashed rounded-lg">
                            <i class="fa-solid fa-exclamation-triangle mr-2"></i> ì‹œê°„í‘œ ë¡œë“œ ì‹¤íŒ¨: ${error.message}
                        </div>`;
                });
        }


        // ìº˜ë¦°ë” ì´ë²¤íŠ¸ ë°ì´í„°
        const allEvents = [
            { title: 'ìˆ˜ê°• ì‹ ì²­ ì‹œì‘', start: '2025-11-20', display: 'background', color: '#BDE0FE' },
            { title: 'ì¤‘ê°„ê³ ì‚¬', start: '2025-11-24', end: '2025-11-28' , color: '#FDBA74'},
            { title: 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤', start: '2025-12-25', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' }, 
            { title: 'ì‹ ì •', start: '2026-01-01', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' }, 
            { title: 'ì„¤ë‚  ì—°íœ´', start: '2026-02-14', end: '2026-02-18', color: '#F87171', textColor: 'white', className: 'holiday-event' }, 
            { title: 'ì‚¼ì¼ì ˆ ëŒ€ì²´íœ´ì¼', start: '2026-03-02', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' },
            { title: 'ì–´ë¦°ì´ë‚ ', start: '2026-05-05', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' },
            { title: 'ë¶€ì²˜ë‹˜ ì˜¤ì‹ ë‚  ëŒ€ì²´íœ´ì¼', start: '2026-05-25', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' },
            { title: 'í˜„ì¶©ì¼', start: '2026-06-06', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' },
            { title: 'ê´‘ë³µì ˆ', start: '2026-08-15', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' },
            { title: 'ì¶”ì„ ì—°íœ´', start: '2026-09-24', end: '2026-09-27', color: '#F87171', textColor: 'white', className: 'holiday-event' }, 
            { title: 'ê°œì²œì ˆ ëŒ€ì²´íœ´ì¼', start: '2026-10-05', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' },
            { title: 'í•œê¸€ë‚ ', start: '2026-10-09', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' },
            { title: 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤', start: '2026-12-25', color: '#EF4444', textColor: 'white', className: 'holiday-event', display: 'list-item' },
        ];


        // ìº˜ë¦°ë” ì´ˆê¸°í™”
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth', 
            locale: 'ko', 
            editable: false,
            selectable: true,
            weekends: true,
            dayHeaders: false, // ìš”ì¼ í—¤ë” ìˆ¨ê¹€ (HTMLì—ì„œ ìˆ˜ë™ìœ¼ë¡œ í‘œì‹œ)
            headerToolbar: false, // ìƒë‹¨ íˆ´ë°” ìˆ¨ê¹€
            
            // ë‚ ì§œ ìˆ«ìë§Œ í‘œì‹œí•˜ë„ë¡ ì»¤ìŠ¤í„°ë§ˆì´ì§•
            dayCellContent: function(arg) {
                 const dayNumber = arg.date.getDate();
                 // span íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ ì ìš©ì„ ì‰½ê²Œ í•¨
                 return { html: `<span class="w-7 h-7 flex items-center justify-center mx-auto">${dayNumber}</span>` };
            },
            
            dayCellDidMount: function(info) {
                // 1. ê³µíœ´ì¼ í´ë˜ìŠ¤ ì ìš©
                const currentDayString = toDateStringLocal(info.date); 
                const isHoliday = allEvents.some(event => {
                    if (event.className !== 'holiday-event') return false; 
                    const startDayString = event.start; 
                    if (!event.end) return currentDayString === startDayString;
                    const endDayString = event.end; 
                    // FullCalendarëŠ” end ë‚ ì§œì˜ í•˜ë£¨ ì „ê¹Œì§€ ì´ë²¤íŠ¸ê°€ ì§€ì†ë˜ë¯€ë¡œ, endë¥¼ í¬í•¨í•˜ê¸° ìœ„í•´ 1ì¼ ë” ì¶”ê°€ (FullCalendar ê¸°ë³¸ ë™ì‘)
                    return currentDayString >= startDayString && currentDayString <= endDayString; 
                });
                if (isHoliday) {
                    info.el.classList.add('holiday-date');
                }

                // 2. ìº˜ë¦°ë” ë‚ ì§œ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
                info.el.addEventListener('click', function() {
                    const selectedDateStr = toDateStringLocal(info.date);
                    // í´ë¦­ëœ ì…€ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ fetchScheduleì— ì „ë‹¬í•˜ì—¬ ìŠ¤íƒ€ì¼ ë³€ê²½
                    fetchSchedule(selectedDateStr, info.el.closest('.fc-daygrid-day')); 
                });
            },

            // ìº˜ë¦°ë” ë Œë”ë§/ì›” ë³€ê²½ ì‹œ ì œëª© ì—…ë°ì´íŠ¸
            datesSet: function(info) {
                const currentMonthStart = info.view.currentStart;
                calendarTitle.textContent = formatMonthTitle(currentMonthStart); 
            },
            
            eventClick: function(info) {
                 showEventDetails(info);
            },
            
            events: allEvents
        });
        
        // ë¡œë”© ì§í›„ ì´ˆê¸° ì œëª© ì„¤ì •
        calendarTitle.textContent = formatMonthTitle(new Date());

        // ìº˜ë¦°ë” ë Œë”ë§
        calendar.render();
        
        // â­ï¸ ìµœì´ˆ ë¡œë”© ì‹œ: ì˜¤ëŠ˜ ë‚ ì§œì˜ ì‹œê°„í‘œë¥¼ ë¡œë“œí•˜ê³  ìŠ¤íƒ€ì¼ ì ìš©
        const today = new Date();
        const todayStr = toDateStringLocal(today);
        
        // ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ ì˜ì—­ ì´ˆê¸° ì—…ë°ì´íŠ¸
        if (todayDateDisplay) {
             todayDateDisplay.textContent = getFormattedDateWithWeekday(today);
        }

        // FullCalendar DOMì—ì„œ ì˜¤ëŠ˜ ë‚ ì§œ ì…€ ì°¾ê¸°
        // .fc-day-today í´ë˜ìŠ¤ ëŒ€ì‹ , data-date ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ì˜¤ëŠ˜ ë‚ ì§œë¥¼ í™•ì‹¤íˆ ì°¾ìŠµë‹ˆë‹¤.
        const todayDataCell = calendarEl.querySelector(`.fc-day[data-date="${todayStr}"]`);

        if (todayDataCell) {
            // .closest('.fc-daygrid-day')ë¥¼ ì‚¬ìš©í•˜ì—¬ FullCalendar ì…€ì˜ ìƒìœ„ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ìŒ
            fetchSchedule(todayStr, todayDataCell.closest('.fc-daygrid-day'));
        } else {
             // ì˜¤ëŠ˜ ë‚ ì§œê°€ í˜„ì¬ ë·°ì— ì—†ëŠ” ê²½ìš°ë¼ë„, ìŠ¤ì¼€ì¤„ ë¡œë“œëŠ” ì‹œë„ (ìŠ¤íƒ€ì¼ ì ìš©ì€ ì•ˆ ë¨)
             fetchSchedule(todayStr, null);
        }

        
        // Tailwind ë²„íŠ¼ì— FullCalendar ì´ë™ ì´ë²¤íŠ¸ ì—°ê²°
        prevMonthBtn.addEventListener('click', function() {
            calendar.prev();
            // ì›” ì´ë™ í›„ì—ë„ ì˜¤ëŠ˜ ë‚ ì§œ ìŠ¤íƒ€ì¼ì„ ìœ ì§€í•˜ê¸° ìœ„í•´, ì„ íƒëœ ë‚ ì§œê°€ í˜„ì¬ ë·°ì— ìˆëŠ”ì§€ í™•ì¸
            if (currentSelectedDayEl && !calendarEl.contains(currentSelectedDayEl)) {
                // ì„ íƒëœ ë‚ ì§œê°€ ë·°ë¥¼ ë²—ì–´ë‚˜ë©´, ìŠ¤íƒ€ì¼ ì œê±°
                currentSelectedDayEl.classList.remove('selected-day');
                currentSelectedDayEl = null;
            }
        });

        nextMonthBtn.addEventListener('click', function() {
            calendar.next();
            // ì›” ì´ë™ í›„ì—ë„ ì˜¤ëŠ˜ ë‚ ì§œ ìŠ¤íƒ€ì¼ì„ ìœ ì§€í•˜ê¸° ìœ„í•´
            if (currentSelectedDayEl && !calendarEl.contains(currentSelectedDayEl)) {
                currentSelectedDayEl.classList.remove('selected-day');
                currentSelectedDayEl = null;
            }
        });
    });
</script>
	
	
	<!-- ê³µì§€ì‚¬í•­ ëª¨ë‹¬ë ˆì´ì–´ ìŠ¤í¬ë¦½íŠ¸ -->
	<script>
    // ----------------------------------------------------------------------
    // 0. ì „ì—­ ìƒíƒœ ë³€ìˆ˜ (ìœ ì§€)
    // ----------------------------------------------------------------------
    /**
     * ìƒì„¸ ëª¨ë‹¬ì´ ëª©ë¡ ëª¨ë‹¬ì—ì„œ ì—´ë ¸ëŠ”ì§€ ì—¬ë¶€ë¥¼ ì €ì¥í•˜ëŠ” í”Œë˜ê·¸ì…ë‹ˆë‹¤.
     */
    let isOpenedFromListModal = false;

    // ----------------------------------------------------------------------
    // 1. ê³µí†µ ëª¨ë‹¬ ì œì–´ í•¨ìˆ˜ (ìœ ì§€)
    // ----------------------------------------------------------------------

    /**
     * ê³µì§€ì‚¬í•­ ëª©ë¡ ëª¨ë‹¬ì„ ì—´ê³  ë°ì´í„°ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤. (ìœ ì§€)
     */
    function openNoticeListModal() {
        document.getElementById('noticeModalBackdrop').classList.remove('hidden');
        document.getElementById('noticeListModal').classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë°©ì§€
        loadNoticeList(1);
    }

    /**
     * ê³µì§€ì‚¬í•­ ëª©ë¡ ëª¨ë‹¬ì„ ë‹«ìŠµë‹ˆë‹¤. (ìœ ì§€)
     */
    function closeNoticeListModal() {
        document.getElementById('noticeModalBackdrop').classList.add('hidden');
        document.getElementById('noticeListModal').classList.add('hidden');
        document.body.style.overflow = ''; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë³µêµ¬
        document.getElementById('searchInput').value = '';
    }

    /**
     * ê³µì§€ì‚¬í•­ ìƒì„¸ ëª¨ë‹¬ì„ ë‹«ìŠµë‹ˆë‹¤. (ìœ ì§€)
     */
    function closeNoticeDetailModal() {
        document.getElementById('noticeDetailModal').classList.add('hidden');
        
        if (isOpenedFromListModal) {
            // 1. ëª©ë¡ ëª¨ë‹¬ì—ì„œ ì§„ì…: ëª©ë¡ ëª¨ë‹¬ì„ ë‹¤ì‹œ ë³´ì´ê²Œ í•˜ê³ , ë°°ê²½ê³¼ ìŠ¤í¬ë¡¤ ì ê¸ˆì€ ìœ ì§€
            document.getElementById('noticeListModal').classList.remove('hidden'); 
        } else {
            // 2. ë©”ì¸ í˜ì´ì§€ì—ì„œ ì§„ì…: ë°°ê²½, ìŠ¤í¬ë¡¤ ì ê¸ˆì„ ëª¨ë‘ í•´ì œí•˜ê³  ë©”ì¸ìœ¼ë¡œ ë³µê·€
            document.getElementById('noticeModalBackdrop').classList.add('hidden');
            document.body.style.overflow = '';
        }
        
        // ìƒì„¸ ëª¨ë‹¬ì„ ë‹«ì•˜ìœ¼ë¯€ë¡œ í”Œë˜ê·¸ ì´ˆê¸°í™”
        isOpenedFromListModal = false;
    }

    // ----------------------------------------------------------------------
    // 2. ê³µì§€ì‚¬í•­ ë°ì´í„° ë¡œë“œ ë° ë Œë”ë§ í•¨ìˆ˜ (í˜ì´ì§• ë¡œì§ ì „ë©´ ìˆ˜ì •)
    // ----------------------------------------------------------------------

    /**
     * ê³µì§€ì‚¬í•­ ìš°ì„ ìˆœìœ„ ì½”ë“œì— ë”°ë¥¸ ìŠ¤íƒ€ì¼ íƒœê·¸ HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤. (ìœ ì§€)
     */
    function getPriorityTag(notice) {
        if (notice.is_10) {
            return `<span class="bg-red-100 text-red-700 text-xs px-2 py-0.5 rounded font-bold">ê³ ì •</span>`;
        } else if (notice.is_20) {
            return `<span class="bg-yellow-100 text-orange-700 text-xs px-2 py-0.5 rounded font-bold">ìš°ì„ </span>`;
        } else if (notice.is_30) {
            return `<span class="bg-gray-100 text-gray-800 text-xs px-2 py-0.5 rounded font-bold">ì¼ë°˜</span>`;
        }
        return `<span class="text-gray-500 text-xs">ê¸°íƒ€</span>`;
    }
    
    /**
     * ê³µì§€ì‚¬í•­ ëª©ë¡ì„ AJAXë¡œ ë¶ˆëŸ¬ì™€ í…Œì´ë¸”ì— ë Œë”ë§í•˜ê³  í˜ì´ì§•ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. (ìœ ì§€)
     */
    function loadNoticeList(pageNo, condition = "") {
        const tableBody = document.getElementById('noticeListTableBody');
        // conditionì´ ë¹ˆ ë¬¸ìì—´ì´ ì•„ë‹ˆë©´ ê²€ìƒ‰ API í˜¸ì¶œ
        const apiUrl = condition ? '/searchMainUniversityNotice' : '/getMainUniversityNoticeList'; 
        
        tableBody.innerHTML = `<tr><td colspan="6" class="p-6 text-center text-blue-500"><i class="fa-solid fa-spinner fa-spin"></i> ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>`;

        const params = new URLSearchParams();
        params.append('currentPage', pageNo);
        if (condition) {
            // ì„œë²„ ë³€ìˆ˜ëª… (searchUniversityNoticeCondition)ì„ ì‚¬ìš©í•˜ì—¬ íŒŒë¼ë¯¸í„° ì „ë‹¬
            // ì´ìª½ì—ì„œ í˜ì´ì§€ íŒŒë¼ë¯¸í„°ë„ ë§ì¶°ì¤˜ì•¼í•¨
            params.append('currentPage', pageNo);
            params.append('searchUniversityNoticeCondition', condition); 
        } else {
        	
        	// ì¼ë°˜ ëª©ë¡ API: page ì‚¬ìš© (ì»¨íŠ¸ë¡¤ëŸ¬ íŒŒë¼ë¯¸í„° ì´ë¦„ì´ pageì„!)
            params.append('page', pageNo);
            // limitì€ ê¸°ë³¸ 10ì´ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ ë„£ì–´ë„ ë¨
            params.append('limit', 10);
        }

        fetch(`${apiUrl}?${params.toString()}`)
            .then(res => res.json())
            .then(data => {
                if (data.status === 'success') {
                    const noticeList = data.universityNoticeList;
                    let html = '';

                    if (noticeList && noticeList.length > 0) {
                        noticeList.forEach(notice => {
                            const date = notice.universityNoticeUpdatedate ? notice.universityNoticeUpdatedate.split(' ')[0] : 'N/A';
                            
                            html += `
                                <tr class="hover:bg-gray-50 transition">
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900">${notice.universityNoticeNo}</td>
                                    <td class="px-6 py-4 text-sm text-center">${getPriorityTag(notice)}</td>
                                    <td class="px-6 py-4 text-sm font-medium">
                                        <a href="javascript:void(0)" onclick="openNoticeDetailModal(${notice.universityNoticeNo})" class="text-blue-600 hover:text-blue-800 font-semibold transition">
                                            ${notice.universityNoticeTitle}
                                        </a>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-500">${notice.universityWriterUserName}</td>
                                    <td class="px-6 py-4 text-sm text-gray-500">${notice.universityNoticeViewCnt}</td>
                                    <td class="px-6 py-4 text-sm text-gray-500">${formatDate(date)}</td>
                                </tr>
                            `;
                        });
                    } else {
                        html = `<tr><td colspan="6" class="p-6 text-center text-gray-500">ê²€ìƒ‰ ê²°ê³¼ ë˜ëŠ” ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>`;
                    }
                    
                    tableBody.innerHTML = html;
                    document.getElementById('listTotalCount').textContent = data.totalCount;

                    // ì„œë²„ ì‘ë‹µì—ì„œ ê²€ìƒ‰ ì¡°ê±´ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì—†ìœ¼ë©´ ì´ˆê¸° condition ì‚¬ìš©)
                    const finalCondition = data.searchUniversityNoticeCondition || condition;
                    const finalTotalPages = data.totalPages || 1;
                    
                    renderPagination(data.currentPage, finalTotalPages, finalCondition); 

                } else {
                    tableBody.innerHTML = `<tr><td colspan="6" class="p-6 text-center text-red-500">ê³µì§€ì‚¬í•­ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</td></tr>`;
                }
            })
            .catch(error => {
                console.error('Error fetching notice list:', error);
                tableBody.innerHTML = `<tr><td colspan="6" class="p-6 text-center text-red-500">ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</td></tr>`;
            });
    }

    /**
     * ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ë˜ëŠ” ì—”í„° í‚¤ ì…ë ¥ ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤. (ìœ ì§€)
     */
    function searchNotice(pageNo) {
        // ê²€ìƒ‰ì°½ì˜ ê°’ì—ì„œ ê³µë°±ì„ ì œê±°í•˜ê³ , ê°’ì´ ì—†ìœ¼ë©´ ë¹ˆ ë¬¸ìì—´ ""ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
        const condition = document.getElementById('searchInput').value.trim() || "";
        loadNoticeList(pageNo, condition);
    }
    
    /**
     * í˜ì´ì§• ë²„íŠ¼ì„ ë Œë”ë§í•˜ê³  ë™ì  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì—°ê²°í•©ë‹ˆë‹¤. 
     * â­ï¸ ìµœì¢… ìˆ˜ì •: ì»¨í…Œì´ë„ˆ ìì²´ì— data-conditionì„ ì„¤ì •í•˜ì—¬ DOM êµ¬ì¡° ì•ˆì •í™” ë° ì´ë²¤íŠ¸ ì˜¤ë¥˜ ë°©ì§€
     */
    function renderPagination(currentPage, totalPages, condition) {
        const container = document.getElementById('paginationContainer');
        let html = '';
        const groupSize = 5;
        const currentGroup = Math.ceil(currentPage / groupSize);
        const startPage = (currentGroup - 1) * groupSize + 1;
        const endPage = Math.min(startPage + groupSize - 1, totalPages);
        
        // totalPagesê°€ 1 ì´í•˜ì¸ ê²½ìš°, í˜ì´ì§•ì„ ìˆ¨ê¹ë‹ˆë‹¤.
        if (totalPages <= 1) {
            container.innerHTML = '';
            container.removeAttribute('data-condition');
            return;
        }
        
        // â­ï¸ í•µì‹¬ ìˆ˜ì • 1: ì»¨í…Œì´ë„ˆ DOM ìì²´ì— data-condition ì†ì„±ì„ ì„¤ì •í•©ë‹ˆë‹¤.
        // í°ë”°ì˜´í‘œê°€ í¬í•¨ë  ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ HTML ì—”í‹°í‹°ë¡œ ì´ìŠ¤ì¼€ì´í”„í•©ë‹ˆë‹¤.
        container.setAttribute('data-condition', condition.replace(/"/g, '&quot;'));
        
        // ì´ì „ í˜ì´ì§€ ê·¸ë£¹ ë²„íŠ¼
        if (startPage > 1) {
            html += `<button class="prev-page px-3 py-1.5 text-sm rounded border border-gray-300 hover:bg-gray-100 text-gray-600" data-page="${startPage - 1}"><i class="fa-solid fa-chevron-left"></i></button>`;
        }
        
        // í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼
        for (let i = startPage; i <= endPage; i++) {
            const activeClass = i === currentPage ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-100';
            // onclick ëŒ€ì‹  classì™€ data-page ì†ì„±ë§Œ ì‚¬ìš©í•˜ì—¬ ì•ˆì •ì ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.
            html += `<button class="page-btn px-3 py-1.5 text-sm rounded border border-gray-300 ${activeClass}" data-page="${i}">${i}</button>`;
        }

        // ë‹¤ìŒ í˜ì´ì§€ ê·¸ë£¹ ë²„íŠ¼
        if (endPage < totalPages) {
            html += `<button class="next-page px-3 py-1.5 text-sm rounded border border-gray-300 hover:bg-gray-100 text-gray-600" data-page="${endPage + 1}"><i class="fa-solid fa-chevron-right"></i></button>`;
        }
        
        // â­ï¸ í•µì‹¬ ìˆ˜ì • 2: ë²„íŠ¼ë“¤ë§Œ container.innerHTMLì— ì‚½ì…í•©ë‹ˆë‹¤. (ì¶”ê°€ div ì œê±°)
        container.innerHTML = html;
        
        // â­ï¸ í•µì‹¬ ìˆ˜ì • 3: ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë™ì  ì—°ê²° (ìƒˆë¡œ ì‚½ì…ëœ ë²„íŠ¼ì— ì´ë²¤íŠ¸ë¥¼ ë‹¤ì‹œ ì—°ê²°)
        container.querySelectorAll('.page-btn, .prev-page, .next-page').forEach(btn => {
            btn.addEventListener('click', function() {
                const page = parseInt(this.getAttribute('data-page'));
                
                // data-conditionì„ ì»¨í…Œì´ë„ˆ(paginationContainer)ì—ì„œ ì§ì ‘ ê°€ì ¸ì˜µë‹ˆë‹¤.
                const condAttribute = container.getAttribute('data-condition');
                // HTML ì—”í‹°í‹°ë¥¼ ë‹¤ì‹œ ë¬¸ìì—´ë¡œ ë””ì½”ë”©í•˜ì—¬ ì‚¬ìš©
                const cond = condAttribute ? condAttribute.replace(/&quot;/g, '"') : '';
                
                loadNoticeList(page, cond);
            });
        });
    }

    /**
     * ê³µì§€ì‚¬í•­ ìƒì„¸ ì •ë³´ë¥¼ AJAXë¡œ ë¶ˆëŸ¬ì™€ ìƒì„¸ ëª¨ë‹¬ì„ ë„ì›ë‹ˆë‹¤. (ìœ ì§€)
     */
    function openNoticeDetailModal(noticeNo) {
        const listModal = document.getElementById('noticeListModal');
        
        isOpenedFromListModal = !listModal.classList.contains('hidden');
        
        if (isOpenedFromListModal) {
             listModal.classList.add('hidden');
        }
        
        document.body.style.overflow = 'hidden'; 
        document.getElementById('noticeModalBackdrop').classList.remove('hidden'); 

        fetch(`/getMainUniversityNoticeDetail?universityNoticeNo=${noticeNo}`)
            .then(res => res.json())
            .then(data => {
                if (data.status === 'success') {
                    const detail = data.data;

                    document.getElementById('detailTitle').textContent = detail.universityNoticeTitle;
                    document.getElementById('detailWriter').innerHTML = `<i class="fa-solid fa-user"></i> ì‘ì„±ì: ${detail.universityWriterUserName}`;
                    document.getElementById('detailDate').innerHTML = `<i class="fa-regular fa-clock"></i> ì‘ì„±ì¼: ${formatDate(detail.universityNoticeUpdatedate) ? formatDate(detail.universityNoticeUpdatedate.split(' ')[0]) : 'N/A'}`;
                    document.getElementById('detailViewCount').innerHTML = `<i class="fa-solid fa-eye"></i> ì¡°íšŒìˆ˜: ${detail.universityNoticeViewCnt}`;
                    
                    let priorityName = '';
                    let priorityClass = '';
                    if (detail.universityNoticePriorityCode === 10) {
                        priorityName = 'ê³ ì • ê³µì§€';
                        priorityClass = 'bg-red-50 text-red-600';
                    } else if (detail.universityNoticePriorityCode === 20) {
                        priorityName = 'ìš°ì„  ê³µì§€';
                        priorityClass = 'bg-yellow-50 text-orange-600';
                    } else if (detail.universityNoticePriorityCode === 30) {
                        priorityName = 'ì¼ë°˜ ê³µì§€';
                        priorityClass = 'bg-gray-50 text-gray-600';
                    }

                    document.getElementById('detailPriority').innerHTML = `<i class="fa-solid fa-bell"></i> ìš°ì„ ìˆœìœ„: <span class="${priorityClass} px-2 py-0.5 rounded">${priorityName}</span>`;
                    document.getElementById('detailContent').textContent = detail.universityNoticeContent;
                    
                    // ìƒì„¸ ëª¨ë‹¬ í‘œì‹œ
                    document.getElementById('noticeDetailModal').classList.remove('hidden');
                } else {
                    alert(data.message || "ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                    // ì‹¤íŒ¨ ì‹œ ëª©ë¡ ëª¨ë‹¬ ìƒíƒœ ë³µêµ¬ ë° ë°°ê²½ í•´ì œ
                    if (isOpenedFromListModal) listModal.classList.remove('hidden');
                    document.getElementById('noticeModalBackdrop').classList.add('hidden');
                    document.body.style.overflow = '';
                    isOpenedFromListModal = false; // í”Œë˜ê·¸ ì´ˆê¸°í™”
                }
            })
            .catch(error => {
                console.error('Error fetching notice detail:', error);
                alert("ì„œë²„ ì˜¤ë¥˜ë¡œ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                 // ì‹¤íŒ¨ ì‹œ ëª©ë¡ ëª¨ë‹¬ ìƒíƒœ ë³µêµ¬ ë° ë°°ê²½ í•´ì œ
                if (isOpenedFromListModal) listModal.classList.remove('hidden');
                document.getElementById('noticeModalBackdrop').classList.add('hidden');
                document.body.style.overflow = '';
                isOpenedFromListModal = false; // í”Œë˜ê·¸ ì´ˆê¸°í™”
            });
    }

    // ----------------------------------------------------------------------
    // 3. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²° (DOM ë¡œë“œ í›„ ì‹¤í–‰) (ìœ ì§€)
    // ----------------------------------------------------------------------
    document.addEventListener('DOMContentLoaded', () => {
        
        // 1. ë©”ì¸ í˜ì´ì§€ ê³µì§€ì‚¬í•­ 'ì „ì²´ë³´ê¸°' ë²„íŠ¼ ì—°ê²°
        const allNoticeButton = document.querySelector('.bg-blue-50 a.text-sm');
        if (allNoticeButton) {
             allNoticeButton.setAttribute('href', 'javascript:void(0)');
             allNoticeButton.setAttribute('onclick', 'openNoticeListModal()');
        }

        // 2. ë©”ì¸ í˜ì´ì§€ ê³µì§€ì‚¬í•­ ê°œë³„ í•­ëª© í´ë¦­ ì´ë²¤íŠ¸ ì—°ê²°
        document.querySelectorAll('.grid-cols-2 a[data-notice-no]').forEach(item => {
            const noticeNo = item.getAttribute('data-notice-no');
            
            if (noticeNo) {
                 item.setAttribute('onclick', `openNoticeDetailModal(${noticeNo})`);
                 item.setAttribute('href', 'javascript:void(0)'); // ê¸°ë³¸ ì´ë™ ë°©ì§€

                 const detailLinkSpan = item.querySelector('.text-xs .fa-file-lines').closest('span');
                 if (detailLinkSpan) {
                      detailLinkSpan.setAttribute('onclick', `openNoticeDetailModal(${noticeNo}); event.stopPropagation();`);
                 }
            }
        });

        // 3. ê²€ìƒ‰ inputì—ì„œ Enter í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    searchNotice(1);
                }
            });
        }
    });
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.notice-date[data-raw-date]').forEach(el => {
        const raw = el.getAttribute('data-raw-date');
        el.textContent = formatDate(raw);
    });
});
</script>

<!-- ì¡¸ì—…ì¦ëª…ì„œ íŒì—…ì°½ ì²˜ë¦¬ -->
<script>
    /**
     * ì§€ì •ëœ URLì„ ìƒˆë¡œìš´ íŒì—… ì°½ìœ¼ë¡œ ì—½ë‹ˆë‹¤.
     * @param {string} url íŒì—…ìœ¼ë¡œ ë„ìš¸ URL
     */
    function openCertificatePopup(url) {
        // íŒì—… ì°½ì˜ ì´ë¦„, í¬ê¸° ë° ì˜µì…˜ì„ ì •ì˜í•©ë‹ˆë‹¤.
        const windowName = 'CertificatePopup';
        const width = 800; // íŒì—… ì°½ ë„ˆë¹„
        const height = 600; // íŒì—… ì°½ ë†’ì´
        
        // í™”ë©´ ì¤‘ì•™ì— íŒì—…ì„ ìœ„ì¹˜ì‹œí‚¤ê¸° ìœ„í•œ ê³„ì‚°
        const left = (window.screen.width / 2) - (width / 2);
        const top = (window.screen.height / 2) - (height / 2);

        const windowFeatures = `width=${width},height=${height},left=${left},top=${top},scrollbars=yes,resizable=yes`;

        // window.open()ì„ ì‚¬ìš©í•˜ì—¬ íŒì—… ì°½ì„ ì—½ë‹ˆë‹¤.
        const popupWindow = window.open(url, windowName, windowFeatures);

        // íŒì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì—´ë ¸ëŠ”ì§€ í™•ì¸ (ë¸Œë¼ìš°ì € íŒì—… ì°¨ë‹¨ ë“±ì„ ëŒ€ë¹„)
        if (popupWindow) {
            popupWindow.focus();
        } else {
            alert('íŒì—… ì°½ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
        }
    }

    // 1. ë§í¬ ìš”ì†Œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    const linkElement = document.getElementById('certificateLink');

    // 2. ë§í¬ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì˜¤ë²„ë¼ì´ë“œ(ê°€ë¡œì±„ê¸°)í•©ë‹ˆë‹¤.
    linkElement.addEventListener('click', function(event) {
        // ê¸°ë³¸ <a> íƒœê·¸ ë™ì‘(í˜ì´ì§€ ì´ë™)ì„ ë§‰ìŠµë‹ˆë‹¤.
        event.preventDefault(); 

        // <a> íƒœê·¸ì˜ href ì†ì„±ì—ì„œ URLì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
        const targetUrl = this.href; 
        
        // íŒì—… í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
        openCertificatePopup(targetUrl);
    });

</script>

</body>
</html>