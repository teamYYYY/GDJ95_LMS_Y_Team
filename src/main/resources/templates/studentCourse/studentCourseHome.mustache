<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>강의 홈 | 학사관리시스템</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/pretendard/dist/web/static/pretendard.css" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <style>
        body { font-family: 'Pretendard', sans-serif; }
    </style>
</head>

<body class="bg-[#F5F7FA] text-gray-800">

{{> studentLayout/studentHeader }}

<main class="max-w-6xl mx-auto px-4 py-10">

    <!-- 상단: 강의 기본 정보 -->
    <section class="mb-8">
        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 md:p-8">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">

                <!-- 강의 타이틀 -->
                <div class="space-y-2">
                    <p class="inline-flex items-center gap-2 text-xs font-semibold text-blue-600 uppercase tracking-wide">
                        <i class="fa-solid fa-graduation-cap"></i>
                        강의 홈
                    </p>

                    <h1 class="text-2xl md:text-3xl font-bold text-gray-900 leading-snug">
                        {{course.courseName}}
                    </h1>

                    <div class="flex flex-wrap gap-3 text-sm text-gray-600">
                        <span class="inline-flex items-center gap-1">
                            <i class="fa-solid fa-user-tie w-4"></i>
                            {{course.professorName}} 교수님
                        </span>

                        <span class="inline-flex items-center gap-1">
                            <i class="fa-solid fa-location-dot w-4"></i>
                            {{course.classroom}}
                        </span>

                        <span class="inline-flex items-center gap-1">
                            <i class="fa-solid fa-coins w-4"></i>
                            {{course.courseScore}} 학점
                        </span>
                    </div>
                </div>

                <!-- 수업 시간 -->
                <div class="bg-blue-50 rounded-xl px-4 py-3 text-sm text-blue-900 self-start md:self-auto">
                    <p class="text-xs font-semibold mb-1 text-blue-700">수업 시간</p>
                    <p class="flex items-center gap-2">
                        <i class="fa-regular fa-calendar-days w-4"></i>
                        <span class="font-medium">
                            {{course.yoilName}}요일 · {{course.courseTimeStart}}교시 ~ {{course.courseTimeEnd}}교시
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </section>

    {{> studentCourse/_studentCourseSubNav }}

    <!-- 중단 4개 요약 카드 -->
    <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">

        <!-- 공지 -->
        <div class="bg-white rounded-2xl shadow-md border border-gray-100 p-5 flex flex-col">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-sm font-semibold text-gray-800 flex items-center gap-2">
                    <i class="fa-solid fa-bullhorn text-blue-600"></i> 최근 공지
                </h2>
                <a href="/studentCourseNoticeList?courseNo={{course.courseNo}}"
                   class="text-xs text-blue-600 hover:underline">전체보기</a>
            </div>

            <ul class="space-y-2 text-sm flex-1">

                {{#noticeTitle1}}
                <li class="flex items-start justify-between gap-2">
                    <a href="/studentCourseNoticeDetail?courseNoticeNo={{noticeNo1}}&courseNo={{course.courseNo}}"
                       class="text-gray-800 hover:text-blue-600 line-clamp-1">
                        {{noticeTitle1}}
                    </a>
                    <span class="text-[11px] text-gray-400">{{noticeDate1}}</span>
                </li>
                {{/noticeTitle1}}

                {{#noticeTitle2}}
                <li class="flex items-start justify-between gap-2">
                    <a href="/studentCourseNoticeDetail?courseNoticeNo={{noticeNo2}}&courseNo={{course.courseNo}}"
                       class="text-gray-800 hover:text-blue-600 line-clamp-1">
                        {{noticeTitle2}}
                    </a>
                    <span class="text-[11px] text-gray-400">{{noticeDate2}}</span>
                </li>
                {{/noticeTitle2}}

                {{#noticeTitle3}}
                <li class="flex items-start justify-between gap-2">
                    <a href="/studentCourseNoticeDetail?courseNoticeNo={{noticeNo3}}&courseNo={{course.courseNo}}"
                       class="text-gray-800 hover:text-blue-600 line-clamp-1">
                        {{noticeTitle3}}
                    </a>
                    <span class="text-[11px] text-gray-400">{{noticeDate3}}</span>
                </li>
                {{/noticeTitle3}}

                {{^noticeTitle1}}
                <li class="text-xs text-gray-400">등록된 공지사항이 없습니다.</li>
                {{/noticeTitle1}}
            </ul>
        </div>

        <!-- 과제 -->
        <div class="bg-white rounded-2xl shadow-md border border-gray-100 p-5 flex flex-col">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-sm font-semibold text-gray-800 flex items-center gap-2">
                    <i class="fa-solid fa-clipboard-list text-emerald-600"></i> 과제 요약
                </h2>
                <a href="/student/assignment/list?courseNo={{course.courseNo}}"
                   class="text-xs text-blue-600 hover:underline">과제 목록</a>
            </div>

            {{#assignmentNo}}
            <div class="space-y-2 text-sm">

                <p class="font-medium text-gray-900 line-clamp-2">{{assignmentTitle}}</p>

                <p class="text-xs text-gray-500 flex items-center gap-2">
                    <i class="fa-regular fa-clock w-4"></i>
                    마감일: {{assignmentDeadline}}
                </p>

                <div class="flex items-center justify-between mt-2">
                    <span class="inline-flex items-center gap-1 text-xs">
                        {{#assignmentSubmitted}}
                        <span class="px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 font-semibold">
                            <i class="fa-solid fa-check mr-1"></i> 제출 완료
                        </span>
                        {{/assignmentSubmitted}}

                        {{^assignmentSubmitted}}
                        <span class="px-2 py-1 rounded-full bg-red-50 text-red-600 font-semibold">
                            <i class="fa-solid fa-circle-exclamation mr-1"></i> 미제출
                        </span>
                        {{/assignmentSubmitted}}
                    </span>

                    {{#assignmentScore}}
                    <span class="text-xs text-gray-700">
                        점수: <span class="font-semibold">{{assignmentScore}}</span> 점
                    </span>
                    {{/assignmentScore}}
                </div>

            </div>
            {{/assignmentNo}}

            {{^assignmentNo}}
            <p class="text-xs text-gray-400">등록된 과제가 없습니다.</p>
            {{/assignmentNo}}
        </div>

        <!-- 출석 -->
        <div class="bg-white rounded-2xl shadow-md border border-gray-100 p-5 flex flex-col">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-sm font-semibold text-gray-800 flex items-center gap-2">
                    <i class="fa-solid fa-user-check text-indigo-600"></i> 출석 요약
                </h2>
            </div>

            {{#attendanceCount}}
            <div class="grid grid-cols-3 gap-3 text-center text-xs">
                <div class="p-3 rounded-lg bg-indigo-50">
                    <p class="text-[11px] text-indigo-600 mb-1">출석</p>
                    <p class="text-lg font-bold text-indigo-700">{{attendanceCount}}</p>
                </div>
                <div class="p-3 rounded-lg bg-amber-50">
                    <p class="text-[11px] text-amber-600 mb-1">지각</p>
                    <p class="text-lg font-bold text-amber-700">{{lateCount}}</p>
                </div>
                <div class="p-3 rounded-lg bg-rose-50">
                    <p class="text-[11px] text-rose-600 mb-1">결석</p>
                    <p class="text-lg font-bold text-rose-700">{{absentCount}}</p>
                </div>
            </div>

            <p class="mt-3 text-xs text-gray-600 flex items-center gap-2">
                <i class="fa-solid fa-chart-simple w-4"></i>
                출석률
                <span class="font-semibold text-gray-900">{{attendanceRate}}%</span>
            </p>
            {{/attendanceCount}}

            {{^attendanceCount}}
            <p class="text-xs text-gray-400">출석 정보가 아직 없습니다.</p>
            {{/attendanceCount}}
        </div>

        <!-- 성적 -->
        <div class="bg-white rounded-2xl shadow-md border border-gray-100 p-5 flex flex-col">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-sm font-semibold text-gray-800 flex items-center gap-2">
                    <i class="fa-solid fa-star-half-stroke text-yellow-500"></i> 성적 요약
                </h2>
            </div>

            {{#gradeValue}}
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-xs text-gray-500 mb-1">학기 성적</p>
                    <p class="text-2xl font-bold text-gray-900">{{gradeValue}}</p>
                </div>

                <div class="text-right">
                    <p class="text-xs text-gray-500 mb-1">평점</p>
                    <p class="text-xl font-semibold text-gray-800">{{gradeScore}}</p>
                </div>
            </div>
            {{/gradeValue}}

            {{^gradeValue}}
            <p class="text-xs text-gray-400">성적이 아직 입력되지 않았습니다.</p>
            {{/gradeValue}}
        </div>

    </section>

    <!-- Q&A -->
    <section class="mb-8">
        <div class="bg-white rounded-2xl shadow-md border border-gray-100 p-5 md:p-6">

            <div class="flex items-center justify-between mb-4">
                <h2 class="text-sm font-semibold text-gray-800 flex items-center gap-2">
                    <i class="fa-regular fa-comment-dots text-blue-600"></i> 최근 질문(Q&A)
                </h2>

                <div class="flex items-center gap-2">
                    <a href="/courseQuestionList?courseNo={{course.courseNo}}"
                       class="text-xs text-blue-600 hover:underline">전체보기</a>

                    <a href="/courseQuestionWriteForm?courseNo={{course.courseNo}}"
                       class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full bg-blue-600 text-white text-xs font-medium hover:bg-blue-700">
                        <i class="fa-solid fa-pen"></i> 질문하기
                    </a>
                </div>
            </div>

            <div class="space-y-2 text-sm">

                {{#questionList}}
                <div class="flex items-center justify-between py-2 border-b border-gray-100">

                    {{#canView}}
                    <a href="/courseQuestionDetail?courseQuestionNo={{questionNo}}"
                       class="flex-1 text-gray-800 hover:text-blue-600 line-clamp-1">

                        {{#privatePost}}
                        <i class="fa-solid fa-lock text-[11px] text-gray-400 mr-1"></i>
                        {{/privatePost}}

                        {{questionTitle}}
                    </a>
                    {{/canView}}

                    {{^canView}}
                    <span class="flex-1 text-gray-400 line-clamp-1">
                        <i class="fa-solid fa-lock text-[11px] mr-1"></i>
                        비밀글입니다.
                    </span>
                    {{/canView}}

                    <div class="flex items-center gap-2 ml-3">

                        {{#answered}}
                        <span class="px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-700 text-[11px]">
                            답변 완료
                        </span>
                        {{/answered}}

                        {{^answered}}
                        <span class="px-2 py-0.5 rounded-full bg-amber-50 text-amber-700 text-[11px]">
                            미답변
                        </span>
                        {{/answered}}

                        <span class="text-[11px] text-gray-400">{{createdate}}</span>
                    </div>

                </div>
                {{/questionList}}

                {{^questionList}}
                <p class="text-xs text-gray-400">등록된 질문이 없습니다.</p>
                {{/questionList}}

            </div>
        </div>
    </section>

</main>

{{> studentLayout/studentFooter }}

</body>
</html>
